{% extends "base.html" %}

{% block title %}Campaigns{% endblock %}
{% block header_title %}Campaigns{% endblock %}

{% block content %}
<div class="card">
  <h2>Campaigns</h2>

  <form method="get" style="margin-bottom: 12px;">
    <input name="q" value="{{ q }}" placeholder="Search campaign-id or cluster name" />
    <button type="submit">Search</button>
    <a class="btn btn-secondary" style="margin-left: 10px;"
       href="{% url 'campaign_publisher:publisher_landing_page' %}">
      Back to landing
    </a>
  </form>

  <table>
    <tr>
      <th>Campaign ID</th>
      <th>Video Cluster</th>
      <th>Doctors Supported</th>
      <th>Start</th>
      <th>End</th>
      <th>Action</th>
    </tr>

    {% for r in rows %}
      <tr>
        <td>{{ r.campaign_id }}</td>
        <td>{{ r.new_video_cluster_name }}</td>
        <td>{{ r.doctors_supported }}</td>
        <td>{{ r.start_date }}</td>
        <td>{{ r.end_date }}</td>
        <td>
          <a class="btn btn-secondary" href="{% url 'campaign_publisher:edit_campaign_details' r.campaign_id %}">
            Edit
          </a>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="6">No campaigns found.</td></tr>
    {% endfor %}
  </table>
</div>
{% endblock %}
